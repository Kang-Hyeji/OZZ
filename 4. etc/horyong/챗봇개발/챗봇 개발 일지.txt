챗봇 개발 일지

10월 15일 챗봇 기획 관련 회의 시작

챗봇을 어떻게 개발하면 될지 사전 조사 시작
*참고자료
https://www.slideshare.net/KimSungdong1/20170227-72644192

물음

1.어떠한 챗봇을 만들것인가?(목적)
2.1단계 목표는 어떠한 수준의 챗봇인가?

가안

모델명 : 아야
목적 : 1인 사업장 간단한 보조 업무 도우미
기능
 1.영업안내 도우미
  ex) 명령어 : 아야, 오늘 가게 열었냐?
       답변 : 청자다방은 연중 무휴 이며, 오전 9시 부터 오후 10시 까지 영업 합니다.
 
 2.판매 물품 안내
  ex) 명령어 : 아야, 오늘 무등산 호랑이 빵 있냐?
       답변 : 아직 물량 5개 남아있습니다.
       명령어 : 그러면 2개만 예약 결제 좀 해줘.
       답변: 결제는 어떻게 도와 드릴까요?
       명령어 : 카카오페이로 해줘.

 3.주문예약 안내
  ex) 명령어 : 아야, 커피 아메리카노2잔, 카라멜마끼야또 무설탕생크림으로 시럽은 많이, 
                  그리고 라떼는 우유 뺴고
       답변: 라떼에는 우유가 들어갑니다. 기본 아메리카노로 해드릴까요?
       명령어 : 오케이
       답변: 주문 안내 입니다. 아메리카노 3잔, 카라멜마끼야토 무설탕생크림으로 1잔 총 4잔 예약 하겠습니다.

4.분실물 안내
 ex) 명령어 : 아야, 오늘 혹시 분실물 있었냐?
      답변 : 금일 분실물 안내 없습니다. 
      명령어: 내 팔에감어 지갑이 있는지 확인해줘.
      답변 : 메모 입력 되었습니다.

 1인 사업장에서 서빙과 제조 판매까지 이루어 지는 사업장의 간단한 업무를 챗봇이 도와주는 기능
(매장 운영 경험을 기반으로 이런 챗봇이 있었다면 정말 좋았겠다라고 생각합니다.)

팀원 설득 실패 기획 무산 

10월 16일 챗봇 아이디어 회의

*아이디어*

-대화내용을 토대로 일기써주는 챗봇(챗봇과 이야기 한 내용을 일기로 정리 해주는 챗봇)
-이미지인식가능한 챗봇(이미지를 인식해서 쇼핑 및 칼로리 계산)
-게임(끝말잇기, 퀴즈, 등/)
-기운북돋아주는 챗봇,
-독거노인봇, 
-랜선여친,
-같이 욕해주는 챗봇,
-독거노인과 대화해주는 챗봇,
-healthcare분양,
-소상공인을 위한 도우미 챗봇
-헬스챗봇
-스케줄관리 챗봇
-코딩도우미(이야기 들어주고 정보검색 및 전달) 
-의류 추천 챗봇
-명언 알려주는 챗봇

*회의 내용*
1.사용자의 이야기가 긍정/부정인지 판단하라
-모델을 만들기(이용하여 긍정인지 부정인지 말하는 챗봇 만들기)
-구현하기 프로토 타입 1

*개인 의견*
-긍정인지 부정인지 판별하는 챗봇을 만들고 어떻게 이용 할지에 대한 논의가 없다.
-챗봇을 어떠한 형태로 만들어야 하는지 나는 감이 오지 않는다.

*해결 방안*
1.어떠한 형태든 챗봇을 만들어 보자
2.긍정 부정 모델을 적용해 보자

10월 19일

*결과*
랜선 여친 챗봇 팀원들에게 공개
 -텔레그램을 사용
 -모델링 : 하드코딩
 -성능 : 입력된 값에만 방응하는 단순한 챗봇 구현

*회의 내용*
-Seq2seq 모델을 사용한 챗봇 구현 (고재증 팀원)
-모델의 성능이 좋지 못함 
-문제점 다수 발견 
-금일 있을 기업 담당자와 미팅에서 보완점에 대한 코멘트 듣기

*미팅 후 회의*
1.어떤기능을 했으면 좋겠는가?
 1.메뉴의 궁금증 및 추천
 2.영업 보조
 3.간단한 대화가능

2.그러한 기능을 만들기 위해 필요한 방법은 어떻게해 해야 하는가?
 1.일일이 로직 추가하기(하드코딩)
 2.인공지능 학습
  2-1.인공지능 학습에 대해 어떠한 방식으로?(대화형)

*결론*
1단계 직접 한번 만들어보자. 로직으로 
https://wikidocs.net/77393
https://jfun.tistory.com/199 Python과 Tensorflow를 활용한 AI 챗봇 개발 3강
https://ebbnflow.tistory.com/219 케라스 모델로 인공지능 웹 챗봇 만들기-구상

10월21일 

회의 내용
-모델의 Cuda 설치를 위한 가상환경 공유 
-시나리오와 대화형 혼합에 대한 논의

실행내용
-자료 조사 

10월22일 

*담당강사 미팅*

-임베딩의 중요성 강조
-챗봇 모델의 성능 향상에 대한 객관적인 지표 필요
 (BLEU SCORE,F1 Score 등 적용)
-Seq2seq 모델의 한계점 지적 모델의 변경 추천 
-주제의 변경 추천
-띄어쓰기 문제 해결 법 (py-hanspell적용)

*팀 회의 진행*
-1차 긍정 부정 감정 분석하는 챗봇 만들기 완성
-완성 이후 계획 회의
 (임베딩 기법, 후처리 기법 등에 대한 조사 연구 시작)

*개인 역할*
가정
1.불용어 처리는 실제 데이터에서 사용되는 조사나 기타 어구를 기반으로 
stopwords 생성 하여 제거해 보자.
2.개채명 인식기 조사 
3.blue score, embedding 적용
nltk bleu score

1.형태소 전처리 
2.키워드 사전화
 2-1.특정개체명->저장(개체명분석기)
 2-2.사전처리

3.데이터 Set 정리

4.precess->chatbot의 과정 
 4-1.인사 부터 주문까지 process

5.prototype 만들기

6.23일까지 <감정분석>+추가

7.하드코딩 
 7-1.시나리오 추가 
 7-2.제한 조건 걸기

8.챗봇의 형태 기획
 8-1.어떠한 형태기능
 8-2.기본 메뉴판,주문, 자료받기
 8-3.챗봇의 형태 : 대화형

10월 24일 25일

1.불용어 처리는 실제 데이터에서 사용되는 조사나 기타 어구를 기반으로 
stopwords 생성 하여 제거해 보자.

결과
loss: 0.1592 - acc: 0.9652 - val_loss: 0.5400 - val_acc: 0.9250
-결과적으로 정확도는 미세하게 떨어졌으며 크게 개선점이 보이진 않았다.
ex)아아한잔주세요
네 진동 벨 울리 면 찾 으러 세요

2.그렇다면 Okt 전처리 모델을 사용하고 기본 불용어 처리를 실행해보자.
다른 결과가 나오지 않을까?

결과
loss: 0.1573 - acc: 0.9660 - val_loss: 0.6497 - val_acc: 0.9199
ex)아아 한잔 주세요
드시고 가세 요

음료는 텀블러에 넣어주세요
네 잠시 만 기다려주세요

화장실은 어디에 있나요
네 물티슈 있습니다

인천쌀곡물라떼도 있나요?
네 물티슈 랑 냅킨 두 잔 드리겠습니다

추천하는 메뉴가 있나요?
네 물티슈 있습니다

자바칩 프라푸치노에 휘핑 가득해서 주세요
드시고 가시나요

3.임베딩 기법 입혀 보기
 3-1.One Hot Encoding 
 3-2.word2vec Encoding
 3-3.doc2vec Encoding

10월 26일 

3-1,3-2,3-3 임베딩 기법 코드 구현 및 성능 체크
3-3=Doc2vec 모형의 성능과 이론이 우리 챗봇과 일치 할 것으로 판단
-문장에 들어있는 단어 하나하나를 문장과의 vector값으로 변경하여 문장과 문장끼리의 유사도를 체크한다
-가장 유사한 문장(질문)을 찾아 거기에 있는 답변을 말한다면 좋은 성능의 챗봇이 개발 되지 않을지에 대한 실험 시작

질문
"아이스 아메리카노 한잔이요"
비슷한 질문 찾기
1순위 246번의 질문 [아이스 아메리카노 30개 주세요] [0.7678160667419434]%
2순위 979번의 질문 [아이스 아메리카노 두 잔 주세요] [0.7533383369445801]%
3순위 1499번의 질문 [아이스 아메리카노 2잔에 얼마인가요 ] [0.7421529293060303]%
4순위 3010번의 질문 [아이스 아메리카노 한 잔 주세요] [0.7204865217208862]%
5순위 1164번의 질문 [아이스 아메리카노 한 잔에 얼마인가요 ] [0.6954009532928467]%

질문
"화장실은 어디에 있나요"
비슷한 질문
1순위 2184번의 질문 [화장실 어디예요 ] [0.8744663000106812]%
2순위 1699번의 질문 [네 톨사이즈로 주세요] [0.8167989253997803]%
3순위 36번의 질문 [배달 하시나요 ] [0.7783517837524414]%
4순위 520번의 질문 [작은 사이즈로 주세요] [0.7681775689125061]%
5순위 1277번의 질문 [화장실은 어디죠 ] [0.7153936624526978]%

질문
"추천하는 메뉴가 있나요?"
비슷한 질문
1순위 2787번의 질문 [이게 더치 커피 오백미리에요 ] [0.7892293930053711]%
2순위 2010번의 질문 [메뉴판은 어디있어요 ] [0.779278576374054]%
3순위 1472번의 질문 [톨로 주세요] [0.7773424386978149]%
4순위 2624번의 질문 [추천해주고 싶은 거 어떤 거예요 ] [0.7723571062088013]%
5순위 1124번의 질문 [혹시 메뉴판 주실 수 있나요 ] [0.7487318515777588]%

vector_size=100,dm=0,window=3,
vector=100,wic=3,epochs=100,dm=0,
성능 87.05%

vector_size=124,dm=0,window=3,
vector=100,wic=3,epochs=100,dm=0,
성능 87.17%

*결과*
-유사한 질문을 찾을 확률을 높이면 이미 정해저 있는 답변을 한다.
-후처리 및 띄어쓰기 등 학습 데이터를 늘리면 정확도 높은 챗봇 구현이 가능해 보임

추가 성능을 올리기 위한 방법
-토큰화,원형화,불용어 제거, pos-tag,명사,동사,사용자 정의사전

10월27일 

*담당 강사 회의*

-Seq2seq 모델로 좋은 성능을 내기는 힘들다
-특정 목적을 갖는 챗봇을 만드는 것이 어떻겟냐?
-보험 상담(자동차 보험) 상품
-뉴스읽어주는 기능추가, 멜론 음악 틀어주는 기능 추가
-챗봇 모델의 변경
-챗봇에 긍정부정에 대한 반응 및 의도 파악 성능 추가

-결론-
주어진 과제는 많으나 우리에게 그 모든 것을 구현할 시간과 지식이 부족하다
원래 계획대로 Seq2seq 모델을 개선하고 웹에 연결 해보자

10월28일

*회의*
-1차 목표 달성 
-메뉴판 보여주는 기능,주문관련 기능 추가 논의

10월 29일 

*구체적인 카페 챗봇 기획*

1.로그인 구현
 
2.카페 컨셉

3.페이지 생성 관리자 페이지를 따로 구성

4.나만의 카페 형식

5.시나리오형
  메뉴 리스트 가격 
  커피 디저트 

6.데이터셋 구분 학습 모델 분류 

11월2일 

*집합 개발 진행*
-개발의 진도가 나아가지 않음에 전원 동의
-광주권 팀원들 끼리 모여 개발 시작

-개인 역할
데이터셋 분석 및 구축 정제 시작
-메뉴를 한정 시키고 가격을 일정화하게 한후
화장실 기타 문의에 대한 답변을 일관화 시키면
더 나은 답변을 내지 않을까?
-1차 오류 검사 및 정정
 ex)카페차테, 카카오 파이, 삼성 파이, 후지
 2차 답변 일관성 정정
 ex)와이파이 비밀번호 적혀있는 곳, 화장실 위치 및 주차장 위치,
     진동벨 유지,주문번호 삭제, 영업시간안내
 3차 메너 일관성 정정
 ex)없는 메뉴 삭제, 메뉴가격 통일성 있게 정정, 
 4차 노이즈값 추가
 ex)아재 개그 등 노이즈값 추가
2/10 -> 4/10

내일 할거!
1.Mecab 사용자 사전 사용하기 적용
2.데이터셋 4차 정제 
 -노이즈값 제거

11월 3일

*회의*
-데이터셋 정제를 통해 모델의 정확도 개선 확인
-FastTast를 통해 미리 학습된 데이터 값 모델에 적용해 보기
-Transform 모델 준비하기
-사용자 사전 이용하여 성능 높혀 보기

11월 4일 
-사전 추가를 통해 모델 테스트
-테스트 결과 사전에 추가된 데이터가 적어서 인지 성능 향상에 크게 기여하지 못함
-데이터셋 시나리오 및 추가 데이터 구축

11월5일 
*기업 담당자 미팅/ 담당 강사 미팅*

-결과에 대한 피드백 
-다음 주 발표 자료에 대한 준비 진행

